<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ボウリングBINGO</title>
</head>

<body>
    <div class="container">
        <h2>ボウリングBINGO</h2>
        <h4>BINGOカード</h4>
        <div id="result"></div>
        <div id="buttons">
            <button class="button" id="normal">普通のBINGO</button><br><br>
            <button class="button" id="num">倒した数BINGO</button><br><br>
            <button class="button" id="score">ボウリング調整のBINGO</button>
        </div>
    </div>
    <script>
        //DOMの取得
        var normal = document.getElementById('normal');
        var num = document.getElementById('num');
        var score = document.getElementById('score');
        var buttons = document.getElementById('buttons');
        //一致しているか確かめる関数
        function match(num, bingo) {
            var i;
            for (i = 0; i < bingo.length; i++) {
                if (num == bingo[i]) {
                    return 1;
                }
            }
            return 0;
        }
        //'B','I','N','G','O'の初期化
        function bingo_init(array) {
            array[0] = 'B';
            array[1] = 'I';
            array[2] = 'N';
            array[3] = 'G';
            array[4] = 'O';
        }
        //乱数配列生成normal:0,score:1
        function bingo_create(array, key) {
            var divide = [15, 20];
            for (i = 0; i < 5; i++) {
                for (j = 0; j < 5; j++) {
                    bingo_num = Math.floor((Math.random() * 1000) % divide[key]) + 1 + j * divide[key];
                    while (match(bingo_num, bingo) === 1) {
                        bingo_num = Math.floor((Math.random() * 1000) % divide[key]) + 1 + j * divide[key];
                    }
                    bingo.push(bingo_num);
                }
            }
            bingo[17] = '●';
        }
        //buttonの削除
        function button_remove() {
            buttons.removeChild(normal);
            buttons.removeChild(num);
            buttons.removeChild(score);
        }
        //BINGOの配列
        var i, j;
        var bingo = [];
        var bingo_num
        var result = document.getElementById('result');
        //normal イベントのバインド
        normal.addEventListener('click', function () {
            bingo_init(bingo)
            bingo_create(bingo, 0);
            var tbl = document.createElement("table");
            var tblBody = document.createElement("tbody");
            for (i = 0; i < 6; i++) {
                var row = document.createElement("tr");
                for (j = 0; j < 5; j++) {
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode(bingo[i * 5 + j]);
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                }
                tblBody.appendChild(row);
            }
            tbl.appendChild(tblBody);
            result.appendChild(tbl);
            tbl.setAttribute("border", "1");
            button_remove()
        });
        //num イベントのバインド
        num.addEventListener('click', function () {
            for (i = 0; i < 5; i++) {
                var five = [];
                for (j = 0; j < 5; j++) {
                    bingo_num = Math.floor((Math.random() * 1000) % 10) + 1;
                    while (match(bingo_num, five) === 1) {
                        bingo_num = Math.floor((Math.random() * 1000) % 10) + 1;
                    }
                    bingo.push(bingo_num);
                    five.push(bingo_num);
                }
            }
            bingo[12] = '●';
            var tbl = document.createElement("table");
            var tblBody = document.createElement("tbody");
            for (i = 0; i < 6; i++) {
                var row = document.createElement("tr");
                if (i === 0) {
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("B(1,6)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("I(2,7)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("N(3,8)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("G(4,9)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("O(5,10)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                }
                else {
                    for (j = 0; j < 5; j++) {
                        var cell = document.createElement("td");
                        var cellText = document.createTextNode(bingo[j * 5 + i - 1]);
                        cell.appendChild(cellText);
                        row.appendChild(cell);
                    }
                }
                tblBody.appendChild(row);
            }
            tbl.appendChild(tblBody);
            result.appendChild(tbl);
            tbl.setAttribute("border", "1");
            button_remove()
        });
        //score イベントのバインド
        score.addEventListener('click', function () {
            bingo_init(bingo)
            bingo_create(bingo, 1);
            var tbl = document.createElement("table");
            var tblBody = document.createElement("tbody");
            for (i = 0; i < 6; i++) {
                var row = document.createElement("tr");
                for (j = 0; j < 5; j++) {
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode(bingo[i * 5 + j]);
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                }
                tblBody.appendChild(row);
            }
            tbl.appendChild(tblBody);
            result.appendChild(tbl);
            tbl.setAttribute("border", "1");
            button_remove()
        });
    </script>
</body>

</html>