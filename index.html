<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ボウリングBINGO</title>
</head>

<body>
    <div class="container">
        <h2>ボウリングBINGO</h2>
        <h4>BINGOカード</h4>
        <div id="result"></div>
        <div id="pointboard"></div>
        <div id="buttons">
            <button class="button" id="normal">普通のBINGO</button><br><br>
            <button class="button" id="num">倒した数BINGO</button><br><br>
            <button class="button" id="score">ボウリング調整のBINGO</button>
        </div>
    </div>
    <script>
        //DOMの取得
        var normal = document.getElementById('normal');
        var num = document.getElementById('num');
        var score = document.getElementById('score');
        var buttons = document.getElementById('buttons');
        var result = document.getElementById('result');
        var form = document.createElement("form");
        var input_button = document.createElement("input");
        var input_num = document.createElement("input");
        var attention = document.getElementById("attention");
        //BINGOの配列
        var i, j;
        var bingo = [];
        var bingo_num;//作成時の数と１回目の倒したピンの数
        var kind; //BINGOの種類 num:0 normal:1 score:2
        var repeat = 1; //投げた回数
        //一致しているか確かめる関数
        function match(num, bingo) {
            var i;
            for (i = 0; i < bingo.length; i++) {
                if (num == bingo[i]) {
                    return 1;
                }
            }
            return 0;
        }
        //'B','I','N','G','O'の初期化
        function bingo_init(array) {
            array[0] = 'B';
            array[1] = 'I';
            array[2] = 'N';
            array[3] = 'G';
            array[4] = 'O';
        }
        //乱数配列生成normal:0,score:1
        function bingo_create(array, key) {
            var divide = [15, 20];
            for (i = 0; i < 5; i++) {
                for (j = 0; j < 5; j++) {
                    bingo_num = Math.floor((Math.random() * 1000) % divide[key]) + 1 + j * divide[key];
                    while (match(bingo_num, bingo) === 1) {
                        bingo_num = Math.floor((Math.random() * 1000) % divide[key]) + 1 + j * divide[key];
                    }
                    bingo.push(bingo_num);
                }
            }
            bingo[17] = '●';
        }
        //buttonの削除
        function button_remove() {
            buttons.removeChild(normal);
            buttons.removeChild(num);
            buttons.removeChild(score);
        }
        // getnum()倒した数BINGO
        function process_num() {
            var number = repeat / 2;
            number = numver % 5;
            for (i = 0; i < 5; i++) {
                if (bingo[i + 5 * number] === bingo_num) {
                    bingo[i + 5 * number] = '●';

                }
            }
        }
        //getnum()普通とボウリング調整BINGO
        function process_normal_score() {

        }
        //数字を入力されたとき
        function getnum() {
            var num = input_num.value;
            if (repeat % 2 == 0) {
                if (kind == 0) {
                    process_num();
                }
                else {
                    process_normal_score();
                }
                bingo_num = 0;
            }
            else {
                bingo_num = input_num.value;
            }
            repeat++;
            input_num.value = null;
        }
        //BINGO表作成
        function bingo_make() {
            if (key === 0) {

            }
            else {

            }
        }
        //input作成
        function input_make(key) {
            input_num.setAttribute("type", "number");
            input_num.setAttribute("id", "point");
            input_button.setAttribute("value", "送信");
            input_button.setAttribute("type", "button");
            input_button.setAttribute("onclick", "getnum()");
            input_button.setAttribute("id", "decision");
            var p = document.createElement("p");
            var txt;
            if (key == 0) {
                txt = document.createTextNode("得点を入力してください.");
                p.appendChild(txt);
            }
            else {
                txt = document.createTextNode("倒した本数を入力してください.");
                p.appendChild(txt);
            }
            form.appendChild(input_num);
            form.appendChild(input_button);
            result.appendChild(p);
            result.appendChild(form);
        }
        //normal イベントのバインド
        normal.addEventListener('click', function () {
            bingo_init(bingo)
            bingo_create(bingo, 0);
            kind = 1;
            var tbl = document.createElement("table");
            var tblBody = document.createElement("tbody");
            for (i = 0; i < 6; i++) {
                var row = document.createElement("tr");
                for (j = 0; j < 5; j++) {
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode(bingo[i * 5 + j]);
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                }
                tblBody.appendChild(row);
            }
            tbl.appendChild(tblBody);
            result.appendChild(tbl);
            tbl.setAttribute("border", "1");
            button_remove();
            input_make(0);
        });
        //num イベントのバインド
        num.addEventListener('click', function () {
            kind = 0;
            for (i = 0; i < 5; i++) {
                var five = [];
                for (j = 0; j < 5; j++) {
                    bingo_num = Math.floor((Math.random() * 1000) % 10) + 1;
                    while (match(bingo_num, five) === 1) {
                        bingo_num = Math.floor((Math.random() * 1000) % 10) + 1;
                    }
                    bingo.push(bingo_num);
                    five.push(bingo_num);
                }
            }
            bingo[12] = '●';
            var tbl = document.createElement("table");
            var tblBody = document.createElement("tbody");
            for (i = 0; i < 6; i++) {
                var row = document.createElement("tr");
                if (i === 0) {
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("B(1,6)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("I(2,7)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("N(3,8)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("G(4,9)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode("O(5,10)");
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                }
                else {
                    for (j = 0; j < 5; j++) {
                        var cell = document.createElement("td");
                        var cellText = document.createTextNode(bingo[j * 5 + i - 1]);
                        cell.appendChild(cellText);
                        row.appendChild(cell);
                    }
                }
                tblBody.appendChild(row);
            }
            tbl.appendChild(tblBody);
            result.appendChild(tbl);
            tbl.setAttribute("border", "1");
            button_remove();
            input_make(1);
        });
        //score イベントのバインド
        score.addEventListener('click', function () {
            bingo_init(bingo)
            bingo_create(bingo, 1);
            kind = 2;
            var tbl = document.createElement("table");
            var tblBody = document.createElement("tbody");
            for (i = 0; i < 6; i++) {
                var row = document.createElement("tr");
                for (j = 0; j < 5; j++) {
                    var cell = document.createElement("td");
                    var cellText = document.createTextNode(bingo[i * 5 + j]);
                    cell.appendChild(cellText);
                    row.appendChild(cell);
                }
                tblBody.appendChild(row);
            }
            tbl.appendChild(tblBody);
            result.appendChild(tbl);
            tbl.setAttribute("border", "1");
            button_remove();
            input_make(0);
        });
    </script>
</body>

</html>